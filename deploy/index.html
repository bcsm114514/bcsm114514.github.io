<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>部署指南 - Blazemark Blog</title>
  <link rel="stylesheet" href="/static/css/style.css" />
  <script defer src="/static/js/theme.js"></script>
</head>
<body class="theme-light">
  <header class="site-header">
    <div class="header-inner">
      <div class="site-branding">
        <h1 class="site-title"><a href="https://bcsm114514.github.io">Blazemark Blog</a></h1>
        
        <p class="site-subtitle">用 Python 极速生成静态博客</p>
        
      </div>
      <nav class="site-nav">
        <ul>
        
          <li><a href="/">首页</a></li>
        
          <li><a href="/tag/">标签</a></li>
        
          <li><a href="/category/">分类</a></li>
        
          <li><a href="/archives/">归档</a></li>
        
        </ul>
      </nav>
      <button class="theme-toggle" aria-label="切换主题">🌓</button>
    </div>
    
  </header>

  <main class="site-main">
    <div class="content-inner">
      
  <article class="post-full">
    <h1 class="post-full-title">部署指南</h1>
    <div class="post-full-meta">
      <time>2025-10-02</time>
      
        <span class="tags">
          
            <a href="/tag/Blazemark">Blazemark</a>
          
        </span>
        <span class="category">
          
        </span>        
      
    </div>
    <div class="post-content">
      <h1>Deploy部署指南</h1>
<h2>1️⃣ 准备工作</h2>
<p><strong>1. 生成 SSH Key</strong></p>
<pre><code class="language-bash">ssh-keygen -t ed25519 -C &quot;github-actions-deploy&quot; -f blazemark_deploy_key
</code></pre>
<p>会生成 blazemark_deploy_key 和 blazemark_deploy_key.pub</p>
<p><strong>2. 添加公钥到 GitHub 仓库</strong></p>
<ul>
<li>
<p>打开你的 GitHub 仓库(username.github.io) → Settings → Deploy keys → Add deploy key</p>
</li>
<li>
<p>Title 填：Blazemark Deploy Key</p>
</li>
</ul>
<p>Paste 公钥内容 blazemark_deploy_key.pub</p>
<p>勾选 &quot;Allow write access&quot; ✅</p>
<p><strong>3. 添加私钥到 GitHub Secrets</strong></p>
<ul>
<li>
<p>打开仓库 → Settings → Secrets and variables → Actions → New repository secret</p>
</li>
<li>
<p>Name: DEPLOY_KEY</p>
</li>
<li>
<p>Value: 复制私钥 blazemark_deploy_key 内容</p>
</li>
</ul>
<hr />
<h2>2️⃣ GitHub 配置</h2>
<p><strong>1. 复刻模板</strong></p>
<ul>
<li>点击<strong>Use this template</strong>复刻<a href="https://github.com/bcsm114514/Blazemark">模板</a></li>
</ul>
<p><strong>2. 编辑Actions</strong></p>
<ul>
<li>打开<code>.github/workflows/deploy.yml</code></li>
</ul>
<pre><code class="language-yaml">name: Deploy Blazemark Blog

on:
  push:
    branches:
      - main   # 当 main 分支有更新时触发

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      # 1. 检出代码
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2. 设置 Python
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: &quot;3.11&quot;

      # 3. 安装依赖
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt || echo &quot;No requirements.txt found&quot;

      # 4. 构建 Blazemark 静态站点
      - name: Build site
        run: |
          python blazemark.py build --force

      # 5. 部署到 GitHub Pages
      - name: Deploy to Github Pages
        env:
          DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}
        run: |
          mkdir -p ~/.ssh
          echo &quot;$DEPLOY_KEY&quot; &gt; ~/.ssh/id_ed25519
          chmod 600 ~/.ssh/id_ed25519
          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts
  
          cd public
          git init
          git config user.name &quot;github-actions[bot]&quot;
          git config user.email &quot;github-actions[bot]@users.noreply.github.com&quot;
          git branch -M main
          git remote add origin git@github.com:username/username.github.io.git
          git add .
          git commit -m &quot;Deploy site via GitHub Actions&quot;
          git push -f origin main
</code></pre>
<p>将文件中的username改成实际的用户名</p>
<h3>🔹 说明</h3>
<p>Build 过程：</p>
<p><code>python blazemark.py build --force</code> 会重新生成所有页面</p>
<p>SSH 部署：</p>
<p>使用 DEPLOY_KEY 私钥认证</p>
<p>强制推送 <code>git push -f origin main</code>，保证覆盖远程仓库内容</p>
<p>分支：</p>
<p>远程仓库默认 <code>main</code>，如果不是，请修改 <code>deploy.yml</code> 中 <code>main</code> 为目标分支</p>
<p>注意: 记得开启Pages仓库的GitHub Pages功能</p>
<hr />
<h2>3️⃣ 部署至其他平台</h2>
<ul>
<li>在其他平台选择最终静态文件仓库即可(可为私库)</li>
<li>使用其他支持Python的平台</li>
<li>手动上传</li>
</ul>

    </div>
    <div class="post-footer-nav">
      
      
    </div>
  <p><em>字数统计: 448 字</em></p></article>

  <!-- 引入 Prism.js -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-markup.min.js"></script>

    </div>
  </main>

  <footer class="site-footer">
    <div class="footer-inner">
      <p>© 2025 Blazemark Blog. All Rights Reserved.</p>
      <p>
        <a href="/rss.xml">RSS</a> |
        <a href="/sitemap.xml">Sitemap</a>
      </p>
      <p>Powered by blazemark / theme: BlazeMark</p>
    </div>
  </footer>
</body>
</html>